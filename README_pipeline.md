# üé¨ FastDVDnet + RealBasicVSR x2 Pipeline

–ì–æ—Ç–æ–≤—ã–π workflow –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –≤–∏–¥–µ–æ: **–¥–µ–Ω–æ–π–∑–∏–Ω–≥ ‚Üí –∞–ø—Å–∫–µ–π–ª–∏–Ω–≥ x2**

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –º–æ–¥–µ–ª–µ–π
```bash
# –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source venv/bin/activate

# –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥–µ–ª–∏ –≤ PyTorch format
python convert_fastdvdnet.py      # –°–æ–∑–¥–∞—Å—Ç fastdvdnet_traced.pt
python convert_realbasicvsr.py    # –°–æ–∑–¥–∞—Å—Ç realbasicvsr_traced.pt
```

### 2. –ó–∞–ø—É—Å–∫ pipeline
```bash
# –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
python video_enhancement_pipeline.py input_video.mp4

# –° —É–∫–∞–∑–∞–Ω–∏–µ–º –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
python video_enhancement_pipeline.py input_video.mp4 --output enhanced_video.mp4

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –∫–∞–¥—Ä—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
python video_enhancement_pipeline.py input_video.mp4 --keep-temp
```

## üß© –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–¢–æ—á–Ω–æ –ø–æ –ø–ª–∞–Ω—É:**

1. **–í–∏–¥–µ–æ–¥–µ–∫–æ–¥–µ—Ä** ‚Üí —Ä–∞–∑–±–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ –Ω–∞ –∫–∞–¥—Ä—ã
2. **FastDVDnet** ‚Üí –¥–µ–Ω–æ–π–∑–∏–Ω–≥ –ø–∞—á–∫–∞–º–∏ –ø–æ 5 –∫–∞–¥—Ä–æ–≤, –≤—ã–¥–∞–µ—Ç –æ—á–∏—â–µ–Ω–Ω—ã–π —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π
3. **RealBasicVSR** ‚Üí –∞–ø—Å–∫–µ–π–ª–∏–Ω–≥ x2 –∫–∞–∂–¥–æ–≥–æ –∫–∞–¥—Ä–∞  
4. **–í–∏–¥–µ–æ—ç–Ω–∫–æ–¥–µ—Ä** ‚Üí —Å–∫–ª–µ–∏–≤–∞–µ—Ç –≤ –∏—Ç–æ–≥–æ–≤–æ–µ –≤–∏–¥–µ–æ

## ‚ö°Ô∏è –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è M-—á–∏–ø–æ–≤

- –ú–æ–¥–µ–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç PyTorch MPS (Metal Performance Shaders)
- –î–ª—è CoreML –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –¥–æ–±–∞–≤—å—Ç–µ `compute_units=ct.ComputeUnit.ALL`
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –≤–∏–¥–µ–æ —á–∞–Ω–∫–∞–º–∏ –ø–æ 100-200 –∫–∞–¥—Ä–æ–≤ –ø—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ –ø–∞–º—è—Ç–∏

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

- **–î–≤–∞ —à–∞–≥–∞**: —á–∏—Å—Ç–∫–∞ ‚Üí –∞–ø—Å–∫–µ–π–ª
- **–ù–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –±–µ–∑ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ "–º—ã–ª–∞"
- **–û—Ç—Ä–µ–º–∞—Å—Ç–µ—Ä–µ–Ω–Ω—ã–π –≤–∏–¥**: —Å—Ç–∞—Ä—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª –≤—ã–≥–ª—è–¥–∏—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

## üîß –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –æ–ø—Ü–∏–∏

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ—é –ø–∞–ø–∫—É –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
python video_enhancement_pipeline.py video.mp4 --temp-dir ./temp

# –ü–æ–ª—É—á–∏—Ç—å —Å–ø—Ä–∞–≤–∫—É
python video_enhancement_pipeline.py --help
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
MaccyScaler/
‚îú‚îÄ‚îÄ fastdvdnet/                    # –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
‚îú‚îÄ‚îÄ mmediting/                     # MMEditing –¥–ª—è RealBasicVSR
‚îú‚îÄ‚îÄ convert_fastdvdnet.py          # –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä FastDVDnet
‚îú‚îÄ‚îÄ convert_realbasicvsr.py        # –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä RealBasicVSR  
‚îú‚îÄ‚îÄ video_enhancement_pipeline.py  # –ì–ª–∞–≤–Ω—ã–π pipeline
‚îú‚îÄ‚îÄ fastdvdnet_traced.pt          # –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è FastDVDnet
‚îú‚îÄ‚îÄ realbasicvsr_traced.pt        # –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è RealBasicVSR
‚îî‚îÄ‚îÄ venv/                         # Python –æ–∫—Ä—É–∂–µ–Ω–∏–µ
```

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

- **–í–µ—Å–∞ FastDVDnet**: –°–∫–∞—á–∞–ª–∏—Å—å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, —Å–µ–π—á–∞—Å –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ª—É—á–∞–π–Ω—ã–µ (–¥–ª—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã)
- **MMEditing**: –¢—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É –¥–ª—è RealBasicVSR
- **–ü–∞–º—è—Ç—å**: –ë–æ–ª—å—à–∏–µ –≤–∏–¥–µ–æ —Ç—Ä–µ–±—É—é—Ç —á–∞–Ω–∫–æ–≤–∞–Ω–∏—è

## üîÑ –î–ª—è CoreML –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è PyTorch –≤–µ—Ä—Å–∏–∏, –º–æ–∂–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ CoreML:

```python
import coremltools as ct

# –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é –º–æ–¥–µ–ª—å
traced_model = torch.jit.load('fastdvdnet_traced.pt')

# –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ CoreML
mlmodel = ct.convert(
    traced_model,
    inputs=[ct.TensorType(name="input", shape=(1, 15, 256, 256))],
    compute_units=ct.ComputeUnit.ALL
)

# –°–æ—Ö—Ä–∞–Ω—è–µ–º
mlmodel.save("FastDVDnet.mlmodel")
```

–ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è –µ—Å—Ç—å –ø–æ–ª–Ω—ã–π pipeline –∫–∞–∫ –≤ –ø–ª–∞–Ω–µ.